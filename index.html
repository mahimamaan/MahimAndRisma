import React, { useState } from 'react';
import { Plus, Swords, Trash2, AlertCircle, HeartHandshake, RefreshCw, Gavel, Settings, X, Trophy, Minus, ChevronUp } from 'lucide-react';

const INITIAL_GAMES = [
  {
    id: 1,
    name: 'Exploding Kittens',
    // Series Score (Overall Wins)
    mahimSeries: 1,
    rismaSeries: 0,
    // Bout Score (Current Match)
    mahimBout: 0,
    rismaBout: 0,
    status: 'contested',
    note: 'Mahim won match 1. Risma claims "trial run".',
    icon: 'üê±'
  },
  {
    id: 2,
    name: 'Pool',
    mahimSeries: 1,
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'finished',
    note: 'Mahim dominates.',
    icon: 'üé±'
  },
  {
    id: 3,
    name: 'Table Tennis',
    mahimSeries: 0,
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'active',
    note: 'Undecided.',
    icon: 'üèì'
  },
  {
    id: 4,
    name: 'Shithead',
    mahimSeries: 0,
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'active',
    note: 'Card game chaos awaiting.',
    icon: 'üÉè'
  },
  {
    id: 5,
    name: 'Chess',
    mahimSeries: 0,
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'active',
    note: 'Risma is likely to win.',
    icon: '‚ôüÔ∏è'
  },
  {
    id: 6,
    name: 'Mini Golf',
    mahimSeries: 1,
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'active',
    note: 'Mahim has paper proof. Physical evidence.',
    icon: '‚õ≥'
  },
  {
    id: 7,
    name: 'UNO',
    mahimSeries: 1, // Mahim won the first interaction/series
    rismaSeries: 0,
    mahimBout: 0,
    rismaBout: 0,
    status: 'active',
    note: 'Mahim won the first series (2-1).',
    icon: 'üåà'
  }
];

const DEFAULT_FORFEITS = [
  "Do the washing up",
  "Buy the next round of drinks",
  "Cook a 3-course dinner",
  "Give a 5-minute foot massage",
  "Watch winner's choice of movie",
  "Clean the bathroom",
  "Buy winner a treat < ¬£5",
  "Admit you are wrong about everything"
];

const App = () => {
  const [games, setGames] = useState(INITIAL_GAMES);
  
  // Modal States
  const [isAddModalOpen, setIsAddModalOpen] = useState(false);
  const [isWheelOpen, setIsWheelOpen] = useState(false);
  const [isDisputeOpen, setIsDisputeOpen] = useState(false);
  const [activeDisputeGame, setActiveDisputeGame] = useState(null);
  
  // Form States
  const [newGameName, setNewGameName] = useState('');
  const [newGameIcon, setNewGameIcon] = useState('üèÜ');
  
  // Wheel State
  const [forfeits, setForfeits] = useState(DEFAULT_FORFEITS);
  const [newForfeit, setNewForfeit] = useState('');
  const [wheelResult, setWheelResult] = useState(null);
  const [isSpinning, setIsSpinning] = useState(false);

  // Calculate Total Series Wins
  const mahimTotal = games.filter(g => g.mahimSeries > g.rismaSeries).length;
  const rismaTotal = games.filter(g => g.rismaSeries > g.mahimSeries).length;

  // Handle Bout Score (Small Points)
  const handleBoutChange = (id, player, delta) => {
    setGames(prev => prev.map(g => {
      if (g.id !== id) return g;
      const currentScore = player === 'mahim' ? g.mahimBout : g.rismaBout;
      // Prevent negative scores
      if (delta < 0 && currentScore === 0) return g;
      
      return {
        ...g,
        [player === 'mahim' ? 'mahimBout' : 'rismaBout']: currentScore + delta
      };
    }));
  };

  // Handle Series Score (Big Points - Banked Wins)
  const claimSeriesWin = (id, winner) => {
    setGames(prev => prev.map(g => {
      if (g.id !== id) return g;
      return {
        ...g,
        mahimSeries: winner === 'mahim' ? g.mahimSeries + 1 : g.mahimSeries,
        rismaSeries: winner === 'risma' ? g.rismaSeries + 1 : g.rismaSeries,
        // Reset bouts on series claim
        mahimBout: 0,
        rismaBout: 0
      };
    }));
  };

  // Manual Series Adjustment (in case of error)
  const adjustSeriesManual = (id, player, delta) => {
    setGames(prev => prev.map(g => {
      if (g.id !== id) return g;
      const current = player === 'mahim' ? g.mahimSeries : g.rismaSeries;
      if (delta < 0 && current === 0) return g;
      return { ...g, [player === 'mahim' ? 'mahimSeries' : 'rismaSeries']: current + delta };
    }));
  };

  const updateNote = (id, newNote) => {
    setGames(prev => prev.map(game => game.id === id ? { ...game, note: newNote } : game));
  };

  const addNewGame = (e) => {
    e.preventDefault();
    if (!newGameName.trim()) return;
    
    const newGame = {
      id: Date.now(),
      name: newGameName,
      mahimSeries: 0,
      rismaSeries: 0,
      mahimBout: 0,
      rismaBout: 0,
      status: 'active',
      note: 'New challenger approaches!',
      icon: newGameIcon
    };
    
    setGames([...games, newGame]);
    setNewGameName('');
    setIsAddModalOpen(false);
  };

  const deleteGame = (id) => {
    setGames(games.filter(g => g.id !== id));
  };

  const resolveDispute = () => {
    if (activeDisputeGame) {
      setGames(games.map(g => g.id === activeDisputeGame.id ? { ...g, status: 'active', note: `${g.note} (Resolved by Supreme Court)` } : g));
      setIsDisputeOpen(false);
      setActiveDisputeGame(null);
    }
  };

  const spinWheel = () => {
    if (isSpinning) return;
    setIsSpinning(true);
    setWheelResult(null);
    
    let spins = 0;
    const maxSpins = 20 + Math.floor(Math.random() * 10);
    
    const interval = setInterval(() => {
      spins++;
      const randomIndex = Math.floor(Math.random() * forfeits.length);
      setWheelResult(forfeits[randomIndex]);
      
      if (spins >= maxSpins) {
        clearInterval(interval);
        setIsSpinning(false);
      }
    }, 100);
  };

  const addForfeit = (e) => {
    e.preventDefault();
    if (newForfeit.trim()) {
      setForfeits([...forfeits, newForfeit.trim()]);
      setNewForfeit('');
    }
  };

  const removeForfeit = (item) => {
    setForfeits(forfeits.filter(f => f !== item));
  };

  const getLeader = (m, r) => {
    if (m > r) return { text: 'Mahim Leads Series', color: 'text-cyan-400', border: 'border-cyan-500/50' };
    if (r > m) return { text: 'Risma Leads Series', color: 'text-fuchsia-400', border: 'border-fuchsia-500/50' };
    return { text: 'Series Level', color: 'text-gray-400', border: 'border-slate-700' };
  };

  return (
    <div className="min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-fuchsia-500/30 pb-24">
      
      {/* Top Stats Bar */}
      <div className="bg-slate-900 border-b border-slate-800 sticky top-0 z-20 backdrop-blur-md bg-slate-900/90 shadow-xl">
        <div className="max-w-4xl mx-auto px-4 py-3">
          <div className="flex justify-between items-center">
            <div className="flex items-center gap-3">
              <div className="bg-gradient-to-br from-cyan-500 to-blue-600 p-2 rounded-lg shadow-lg shadow-cyan-500/20">
                <Swords className="w-5 h-5 text-white" />
              </div>
              <div>
                <h1 className="text-lg font-black tracking-tight text-white">THE GAUNTLET</h1>
                <p className="text-xs text-slate-400 font-medium">Mahim vs. Risma</p>
              </div>
            </div>

            <div className="flex items-center gap-8">
              <div className="text-center group cursor-help relative">
                <div className="text-3xl font-black text-cyan-400 leading-none drop-shadow-cyan">{mahimTotal}</div>
                <div className="text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1">Mahim</div>
                <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max bg-slate-800 text-[10px] text-slate-300 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-slate-700">Total Series Leads</div>
              </div>
              <div className="h-10 w-px bg-gradient-to-b from-transparent via-slate-700 to-transparent"></div>
              <div className="text-center group cursor-help relative">
                <div className="text-3xl font-black text-fuchsia-400 leading-none drop-shadow-fuchsia">{rismaTotal}</div>
                <div className="text-[9px] font-bold text-slate-500 uppercase tracking-widest mt-1">Risma</div>
                <div className="absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max bg-slate-800 text-[10px] text-slate-300 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-slate-700">Total Series Leads</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <main className="max-w-4xl mx-auto px-4 py-6 space-y-6">
        
        {/* Game Cards */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {games.map(game => {
            const statusStyle = getLeader(game.mahimSeries, game.rismaSeries);
            const isContested = game.status === 'contested';
            
            return (
              <div key={game.id} className={`group relative bg-slate-900 rounded-2xl border ${isContested ? 'border-yellow-500/50' : statusStyle.border} overflow-hidden shadow-xl flex flex-col`}>
                
                {isContested && (
                  <div className="absolute top-0 inset-x-0 h-1 bg-yellow-500 z-10" />
                )}

                {/* HEADER: Series Score */}
                <div className="p-5 pb-4 bg-slate-900/50 relative z-10 border-b border-slate-800">
                  <div className="flex justify-between items-start mb-4">
                    <div className="flex gap-3 items-center">
                      <span className="text-4xl filter drop-shadow-lg">{game.icon}</span>
                      <div>
                        <h3 className="font-bold text-xl text-white tracking-tight">{game.name}</h3>
                        {isContested ? (
                          <span className="inline-flex items-center gap-1 text-[10px] font-bold uppercase text-yellow-500 bg-yellow-500/10 px-2 py-0.5 rounded border border-yellow-500/20">
                            <AlertCircle size={10} />
                            Disputed
                          </span>
                        ) : (
                          <p className={`text-[10px] font-bold tracking-wide uppercase ${statusStyle.color}`}>
                            {statusStyle.text}
                          </p>
                        )}
                      </div>
                    </div>
                    <div className="flex gap-1">
                      {isContested && (
                        <button 
                          onClick={() => { setActiveDisputeGame(game); setIsDisputeOpen(true); }}
                          className="p-2 bg-yellow-500/10 text-yellow-500 rounded hover:bg-yellow-500/20 transition-colors"
                        >
                          <Gavel size={16} />
                        </button>
                      )}
                      <button 
                        onClick={() => deleteGame(game.id)}
                        className="p-2 text-slate-600 hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100"
                      >
                        <Trash2 size={16} />
                      </button>
                    </div>
                  </div>

                  {/* Big Series Score Display */}
                  <div className="flex items-end justify-between px-4">
                    <div className="flex flex-col items-center">
                      <div className="text-4xl font-black text-cyan-400 leading-none">{game.mahimSeries}</div>
                      <div className="flex items-center gap-2 mt-1 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button onClick={() => adjustSeriesManual(game.id, 'mahim', -1)} className="text-slate-600 hover:text-white"><Minus size={12}/></button>
                        <span className="text-[9px] text-slate-500 font-bold uppercase">Series</span>
                        <button onClick={() => adjustSeriesManual(game.id, 'mahim', 1)} className="text-slate-600 hover:text-white"><Plus size={12}/></button>
                      </div>
                    </div>
                    
                    <div className="text-slate-700 font-light text-2xl mb-4">vs</div>

                    <div className="flex flex-col items-center">
                      <div className="text-4xl font-black text-fuchsia-400 leading-none">{game.rismaSeries}</div>
                      <div className="flex items-center gap-2 mt-1 opacity-0 group-hover:opacity-100 transition-opacity">
                        <button onClick={() => adjustSeriesManual(game.id, 'risma', -1)} className="text-slate-600 hover:text-white"><Minus size={12}/></button>
                        <span className="text-[9px] text-slate-500 font-bold uppercase">Series</span>
                        <button onClick={() => adjustSeriesManual(game.id, 'risma', 1)} className="text-slate-600 hover:text-white"><Plus size={12}/></button>
                      </div>
                    </div>
                  </div>
                </div>

                {/* BODY: Current Bout Controls */}
                <div className="bg-slate-950 p-5 flex-1 flex flex-col justify-between">
                  <div className="mb-4">
                    <div className="flex items-center justify-between text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3">
                      <span>Current Bouts</span>
                      <span>Active Match</span>
                    </div>
                    
                    <div className="bg-slate-900/50 rounded-xl p-1 flex items-center justify-between border border-slate-800/50">
                      {/* Mahim Bout Controls */}
                      <div className="flex items-center gap-3 p-2">
                        <button onClick={() => handleBoutChange(game.id, 'mahim', -1)} className="w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white flex items-center justify-center transition-colors">
                          <Minus size={14} />
                        </button>
                        <span className="text-xl font-bold text-cyan-400 tabular-nums w-6 text-center">{game.mahimBout}</span>
                        <button onClick={() => handleBoutChange(game.id, 'mahim', 1)} className="w-8 h-8 rounded-lg bg-cyan-500/10 hover:bg-cyan-500 text-cyan-500 hover:text-white flex items-center justify-center transition-all active:scale-95 border border-cyan-500/20 hover:border-transparent">
                          <Plus size={14} />
                        </button>
                      </div>

                      {/* Divider */}
                      <div className="h-8 w-px bg-slate-800"></div>

                      {/* Risma Bout Controls */}
                      <div className="flex items-center gap-3 p-2">
                        <button onClick={() => handleBoutChange(game.id, 'risma', -1)} className="w-8 h-8 rounded-lg bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white flex items-center justify-center transition-colors">
                          <Minus size={14} />
                        </button>
                        <span className="text-xl font-bold text-fuchsia-400 tabular-nums w-6 text-center">{game.rismaBout}</span>
                        <button onClick={() => handleBoutChange(game.id, 'risma', 1)} className="w-8 h-8 rounded-lg bg-fuchsia-500/10 hover:bg-fuchsia-500 text-fuchsia-500 hover:text-white flex items-center justify-center transition-all active:scale-95 border border-fuchsia-500/20 hover:border-transparent">
                          <Plus size={14} />
                        </button>
                      </div>
                    </div>
                  </div>

                  {/* Claim Set Buttons */}
                  {(game.mahimBout > 0 || game.rismaBout > 0) && (
                    <div className="flex gap-2 mb-4 animate-in fade-in slide-in-from-top-2">
                      {game.mahimBout > game.rismaBout && (
                        <button 
                          onClick={() => claimSeriesWin(game.id, 'mahim')}
                          className="flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center justify-center gap-2 shadow-lg shadow-cyan-900/20 transition-colors"
                        >
                          <Trophy size={14} />
                          Mahim wins set
                        </button>
                      )}
                      {game.rismaBout > game.mahimBout && (
                        <button 
                          onClick={() => claimSeriesWin(game.id, 'risma')}
                          className="flex-1 bg-fuchsia-600 hover:bg-fuchsia-500 text-white py-2 rounded-lg text-xs font-bold uppercase tracking-wide flex items-center justify-center gap-2 shadow-lg shadow-fuchsia-900/20 transition-colors"
                        >
                          <Trophy size={14} />
                          Risma wins set
                        </button>
                      )}
                      {game.mahimBout === game.rismaBout && (
                        <div className="flex-1 py-2 text-center text-[10px] text-slate-500 uppercase font-bold italic">
                          Score tied
                        </div>
                      )}
                    </div>
                  )}

                  <div className="pt-2 border-t border-slate-800/50">
                    <input 
                      type="text" 
                      value={game.note}
                      onChange={(e) => updateNote(game.id, e.target.value)}
                      className="w-full bg-transparent py-1 text-xs text-slate-400 focus:text-slate-200 focus:outline-none transition-colors placeholder:text-slate-700 italic"
                      placeholder="Notes on this rivalry..."
                    />
                  </div>
                </div>
              </div>
            );
          })}
        </div>

        {/* Actions */}
        <div className="grid grid-cols-2 gap-4 sticky bottom-6 z-30">
            <button 
              onClick={() => setIsAddModalOpen(true)}
              className="bg-slate-800 hover:bg-slate-700 text-white py-4 rounded-xl font-bold shadow-lg border border-slate-700 flex items-center justify-center gap-2 transition-all active:scale-95"
            >
              <Plus size={20} />
              Add Game
            </button>
            <button 
              onClick={() => setIsWheelOpen(true)}
              className="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-4 rounded-xl font-bold shadow-lg shadow-purple-500/20 flex items-center justify-center gap-2 transition-all active:scale-95"
            >
              <RefreshCw size={20} />
              Forfeit Wheel
            </button>
        </div>

      </main>

      {/* Add Game Modal */}
      {isAddModalOpen && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200">
          <div className="bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl w-full max-w-md p-6">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-xl font-bold text-white">New Battleground</h2>
              <button onClick={() => setIsAddModalOpen(false)} className="text-slate-400 hover:text-white">‚úï</button>
            </div>
            <form onSubmit={addNewGame} className="space-y-4">
              <input 
                autoFocus
                type="text" 
                value={newGameName}
                onChange={(e) => setNewGameName(e.target.value)}
                placeholder="Game Name (e.g. Scrabble)"
                className="w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-white focus:border-cyan-500 outline-none"
              />
              <div className="grid grid-cols-6 gap-2">
                {['üèÜ','üé±','üèì','üè∏','üé≥','üéÆ','üé≤','‚ôüÔ∏è','ü•ä','‚õ≥','üèä','üèéÔ∏è', 'üßò', 'üç≥', 'üß†'].map(icon => (
                  <button
                    key={icon}
                    type="button"
                    onClick={() => setNewGameIcon(icon)}
                    className={`h-10 rounded-lg text-xl flex items-center justify-center transition-colors ${newGameIcon === icon ? 'bg-cyan-500/20 ring-2 ring-cyan-500' : 'bg-slate-950 hover:bg-slate-800'}`}
                  >
                    {icon}
                  </button>
                ))}
              </div>
              <button type="submit" className="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 rounded-lg transition-colors">Create Game</button>
            </form>
          </div>
        </div>
      )}

      {/* Wheel of Forfeits Modal */}
      {isWheelOpen && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200">
          <div className="bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl w-full max-w-md p-6 flex flex-col max-h-[80vh]">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-xl font-bold text-white flex items-center gap-2">
                <Settings className="text-pink-500" size={20}/> Wheel of Misfortune
              </h2>
              <button onClick={() => setIsWheelOpen(false)} className="text-slate-400 hover:text-white">‚úï</button>
            </div>
            
            <div className="flex-1 overflow-y-auto mb-4 space-y-2 pr-2">
               {/* Result Display */}
              <div className="bg-slate-950 rounded-xl p-6 text-center border-2 border-slate-800 mb-4 min-h-[120px] flex flex-col items-center justify-center">
                {isSpinning ? (
                  <RefreshCw className="w-8 h-8 text-pink-500 animate-spin" />
                ) : wheelResult ? (
                  <div className="animate-in zoom-in duration-300">
                     <p className="text-xs text-slate-500 uppercase font-bold mb-2">The loser must:</p>
                     <p className="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 leading-tight">{wheelResult}</p>
                  </div>
                ) : (
                  <p className="text-slate-600 text-sm font-medium">Spin to decide the loser's fate</p>
                )}
              </div>

              {/* List */}
              <div className="space-y-2">
                <p className="text-xs font-bold text-slate-500 uppercase">Customise Forfeits</p>
                {forfeits.map((item, idx) => (
                  <div key={idx} className="flex justify-between items-center bg-slate-800/50 p-2 rounded border border-slate-800 text-sm">
                    <span>{item}</span>
                    <button onClick={() => removeForfeit(item)} className="text-slate-500 hover:text-red-400"><X size={14}/></button>
                  </div>
                ))}
              </div>
            </div>

            <div className="mt-auto space-y-3 border-t border-slate-800 pt-4">
              <form onSubmit={addForfeit} className="flex gap-2">
                <input 
                  type="text" 
                  value={newForfeit}
                  onChange={(e) => setNewForfeit(e.target.value)}
                  placeholder="Add new forfeit..."
                  className="flex-1 bg-slate-950 border border-slate-800 rounded px-3 py-2 text-sm focus:border-pink-500 outline-none"
                />
                <button type="submit" className="bg-slate-800 hover:bg-slate-700 px-3 rounded text-white"><Plus size={16}/></button>
              </form>
              <button 
                onClick={spinWheel}
                disabled={isSpinning}
                className="w-full bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold py-3 rounded-lg shadow-lg transition-all active:scale-95 disabled:opacity-50"
              >
                {isSpinning ? 'Spinning...' : 'SPIN THE WHEEL'}
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Dispute Resolution Modal */}
      {isDisputeOpen && activeDisputeGame && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
          <div className="bg-slate-900 border-2 border-yellow-500/30 rounded-2xl shadow-2xl w-full max-w-sm p-8 text-center">
            <div className="w-16 h-16 bg-yellow-500/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <HeartHandshake className="w-8 h-8 text-yellow-500" />
            </div>
            <h2 className="text-xl font-bold text-white mb-2">The Supreme Court</h2>
            <p className="text-slate-400 text-sm mb-6">
              To validate the result of <span className="text-white font-bold">{activeDisputeGame.name}</span>, the opposing party must digitally sign below, admitting defeat.
            </p>
            
            <div className="bg-slate-950 p-4 rounded-lg border border-slate-800 mb-6 text-left">
               <label className="flex items-start gap-3 cursor-pointer group">
                 <div className="relative flex items-center">
                   <input type="checkbox" className="peer h-5 w-5 cursor-pointer appearance-none rounded border border-slate-600 checked:bg-yellow-500 checked:border-yellow-500 transition-all" id="agreement" />
                   <svg className="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-3.5 h-3.5 pointer-events-none opacity-0 peer-checked:opacity-100 text-slate-900" viewBox="0 0 14 14" fill="none">
                     <path d="M3 8L6 11L11 3.5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                   </svg>
                 </div>
                 <span className="text-xs text-slate-500 group-hover:text-slate-300 transition-colors">
                   I hereby confirm that the result was valid, fair, and not a "trial run".
                 </span>
               </label>
            </div>

            <div className="grid grid-cols-2 gap-3">
              <button onClick={() => setIsDisputeOpen(false)} className="py-3 text-slate-400 hover:text-white font-medium">Cancel</button>
              <button 
                onClick={resolveDispute}
                className="py-3 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-bold shadow-lg shadow-yellow-500/20 transition-colors"
              >
                Confirm & Seal
              </button>
            </div>
          </div>
        </div>
      )}

    </div>
  );
};

export default App;
